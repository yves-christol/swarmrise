@import "tailwindcss";

/* Enable class-based dark mode (Tailwind v4) */
@custom-variant dark (&:where(.dark, .dark *));

/* Self-hosted Montserrat Alternates (eliminates DNS round-trips to Google Fonts) */
@font-face {
  font-family: 'Montserrat Alternates';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/montserrat-alternates-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Montserrat Alternates';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/montserrat-alternates-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Montserrat Alternates';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/montserrat-alternates-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Montserrat Alternates';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/montserrat-alternates-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Montserrat Alternates';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/montserrat-alternates-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* ── Surface Token System ─────────────────────────────────────────────
   Light/dark tokens consumed by Tailwind v4 via @theme integration.
   Org paper color override flows through --org-paper-color vars set
   by OrgCustomisationProvider. ──────────────────────────────────────── */

/* Surface tokens: org overrides are set inline by OrgCustomisationProvider.
   The CSS vars here act as defaults when no org override is active. */

:root.light {
  /* Surface (background) */
  --surface-primary: var(--org-paper-color, #ffffff);
  --surface-secondary: var(--org-paper-color-secondary, #f1f5f9);
  --surface-tertiary: var(--org-paper-color-tertiary, #e2e8f0);

  /* Hover – overridden by OrgCustomisationProvider when surface color is set */
  --surface-hover-subtle: #f9fafb;
  --surface-hover: #f3f4f6;
  --surface-hover-strong: #e2e8f0;

  /* Border – overridden by OrgCustomisationProvider when surface color is set */
  --border-default: #e5e7eb;
  --border-strong: #d1d5db;

  /* Text – overridden by OrgCustomisationProvider when surface color is set */
  --text-secondary: #6b7280;
  --text-description: #4b5563;
  --text-tertiary: #9ca3af;

  /* Accent text (auto white/dark on accent buttons) */
  --accent-text: #111111;
}

:root.dark {
  /* Surface (background) */
  --surface-primary: var(--org-paper-color, #1f2937);
  --surface-secondary: var(--org-paper-color-secondary, #334155);
  --surface-tertiary: var(--org-paper-color-tertiary, #475569);

  /* Hover – overridden by OrgCustomisationProvider when surface color is set */
  --surface-hover-subtle: rgba(55, 65, 81, 0.5);
  --surface-hover: #374151;
  --surface-hover-strong: #475569;

  /* Border – overridden by OrgCustomisationProvider when surface color is set */
  --border-default: #374151;
  --border-strong: #4b5563;

  /* Text – overridden by OrgCustomisationProvider when surface color is set */
  --text-secondary: #9ca3af;
  --text-description: #9ca3af;
  --text-tertiary: #6b7280;

  /* Accent text (auto white/dark on accent buttons) */
  --accent-text: #ffffff;
}

@theme {
  /* Custom colors - these automatically generate bg-*, text-*, etc utilities */
  --color-light: #eeeeee;
  --color-dark: #212121;

  /* Brand gold colors (kept for Logo component only) */
  --color-bee-gold: #eac840;
  --color-bee-gold-dark: #d4af37;

  /* Org-customisable highlight colors (overridden at runtime by OrgCustomisationProvider) */
  --color-highlight: var(--org-highlight-color, #eac840);
  --color-highlight-hover: var(--org-highlight-hover, #d4af37);

  /* Surface token integration – auto-generates bg-surface-*, text-text-*, border-border-* */
  --color-surface-primary: var(--surface-primary);
  --color-surface-secondary: var(--surface-secondary);
  --color-surface-tertiary: var(--surface-tertiary);
  --color-surface-hover-subtle: var(--surface-hover-subtle);
  --color-surface-hover: var(--surface-hover);
  --color-surface-hover-strong: var(--surface-hover-strong);
  --color-border-default: var(--border-default);
  --color-border-strong: var(--border-strong);
  --color-text-secondary: var(--text-secondary);
  --color-text-description: var(--text-description);
  --color-text-tertiary: var(--text-tertiary);
  --color-accent-text: var(--accent-text);

  /* Custom font family */
  --font-family-swarm: 'Montserrat Alternates', sans-serif;

  /* Org-customisable title font */
  --font-family-title: var(--org-title-font, Arial, Helvetica, sans-serif);
}

/* Explicit utilities to ensure they work properly in Tailwind v4 */
@layer utilities {
  .font-swarm {
    font-family: var(--font-family-swarm);
  }

  .font-title {
    font-family: var(--font-family-title);
  }

  .bg-light {
    background-color: var(--color-light);
  }

  .bg-dark {
    background-color: var(--color-dark);
  }

  .text-light {
    color: var(--color-light);
  }

  .text-dark {
    color: var(--color-dark);
  }

  /* Gold text - accessible in both themes */
  .text-gold {
    color: var(--color-gold-text, #996800);
  }

  .hover\:text-gold:hover {
    color: var(--color-gold-text, #996800);
  }

}

/* Dark mode variants for custom utilities */
.dark .dark\:bg-dark {
  background-color: var(--color-dark);
}

.dark .dark\:bg-light {
  background-color: var(--color-light);
}

.dark .dark\:text-light {
  color: var(--color-light);
}

.dark .dark\:text-dark {
  color: var(--color-dark);
}

.dark .dark\:text-gold {
  color: var(--color-gold-text);
}

/* Dark mode (class-based for manual override) */
:root.dark {
  --org-highlight-color: #eac840;
  --org-highlight-hover: #d4af37;
  --color-gold-text: var(--org-highlight-color, #eac840);
}

:root.dark body {
  color: var(--color-light);
  background: var(--color-dark);
  font-family: Arial, Helvetica, sans-serif;
}

:root.dark h1, :root.dark h2, :root.dark h3,
:root.dark h4, :root.dark h5, :root.dark h6 {
  font-family: var(--org-title-font, Arial, Helvetica, sans-serif);
}

/* Light mode (class-based for manual override) */
:root.light {
  --org-highlight-color: #eac840;
  --org-highlight-hover: #d4af37;
  --color-gold-text: #996800;
}

:root.light body {
  color: #111111;
  background: var(--color-light);
  font-family: Arial, Helvetica, sans-serif;
}

:root.light h1, :root.light h2, :root.light h3,
:root.light h4, :root.light h5, :root.light h6 {
  font-family: var(--org-title-font, Arial, Helvetica, sans-serif);
}

/* Smooth theme transitions */
body {
  transition: background-color 200ms ease-out, color 200ms ease-out;
}

/* OrgNetworkDiagram theme tokens */
:root.light {
  --diagram-bg: #eeeeee;              /* matches --color-light */
  --diagram-node-fill: #e2e8f0;        /* slate-200 */
  --diagram-node-stroke: #9ca3af;      /* gray-400 */
  --diagram-node-stroke-hover: #6b7280; /* gray-500 */
  --diagram-node-text: #1f2937;        /* gray-800 */
  --diagram-muted-text: #6b7280;       /* gray-500 */
  --diagram-arrow: #6b7280;            /* gray-500 */
  --diagram-golden-bee: var(--org-highlight-hover, #D4AF37); /* golden-bee light mode */
}

:root.dark {
  --diagram-bg: #212121;              /* matches --color-dark */
  --diagram-node-fill: #1f2937;        /* gray-800 */
  --diagram-node-stroke: #9ca3af;      /* gray-400 */
  --diagram-node-stroke-hover: #6b7280; /* gray-500 */
  --diagram-node-text: #e5e7eb;        /* gray-200 */
  --diagram-muted-text: #9ca3af;       /* gray-400 */
  --diagram-arrow: #6b7280;            /* gray-500 */
  --diagram-golden-bee: var(--org-highlight-color, #EAC840); /* golden-bee dark mode */
}

/* Swarmrise static pages: reset org customisation to brand defaults.
   These pages (glossary, terms, privacy, principles) represent the Swarmrise
   platform itself and must not inherit org-level title fonts or highlight colours.
   Uses !important to override the OrgCustomisationProvider's inline styles. */
.swarmrise-page {
  --org-highlight-color: #eac840;
  --org-highlight-hover: #d4af37;
  --org-title-font: 'Montserrat Alternates', sans-serif;
  --org-paper-color: initial;
  --org-paper-color-secondary: initial;
  --org-paper-color-tertiary: initial;
  /* Reset @theme-level accent vars (must beat provider inline styles) */
  --color-highlight: #eac840 !important;
  --color-highlight-hover: #d4af37 !important;
  --color-accent-text: #111111 !important;
  --diagram-golden-bee: #D4AF37 !important;
}
:root.light .swarmrise-page {
  --color-gold-text: #996800 !important;
  --color-surface-primary: #ffffff !important;
  --color-surface-secondary: #f1f5f9 !important;
  --color-surface-tertiary: #e2e8f0 !important;
  --color-surface-hover-subtle: #f9fafb !important;
  --color-surface-hover: #f3f4f6 !important;
  --color-surface-hover-strong: #e2e8f0 !important;
  --color-border-default: #e5e7eb !important;
  --color-border-strong: #d1d5db !important;
  --color-text-secondary: #6b7280 !important;
  --color-text-description: #4b5563 !important;
  --color-text-tertiary: #9ca3af !important;
  --color-accent-text: #111111 !important;
}
:root.dark .swarmrise-page {
  --color-gold-text: #eac840 !important;
  --color-surface-primary: #1f2937 !important;
  --color-surface-secondary: #334155 !important;
  --color-surface-tertiary: #475569 !important;
  --color-surface-hover-subtle: rgba(55, 65, 81, 0.5) !important;
  --color-surface-hover: #374151 !important;
  --color-surface-hover-strong: #475569 !important;
  --color-border-default: #374151 !important;
  --color-border-strong: #4b5563 !important;
  --color-text-secondary: #9ca3af !important;
  --color-text-description: #9ca3af !important;
  --color-text-tertiary: #6b7280 !important;
  --color-accent-text: #ffffff !important;
  --diagram-golden-bee: #EAC840 !important;
}

/* Principles page animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.principle-card {
  animation: fadeInUp 0.4s ease-out both;
}

/* Chat panel slide-in animation */
@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out;
}
