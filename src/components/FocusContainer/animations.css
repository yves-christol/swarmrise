/* Focus view transition animations */

/* ============================================================
   SPATIAL ZOOM TRANSITIONS (FLIP-inspired)

   The spatial zoom creates visual continuity between orga and
   team views using clip-path circle reveal.

   Zoom-in: clip-path on new view expands from clicked node to viewport.
   Zoom-out: clip-path on old view contracts from viewport to node position.

   Duration: 300ms (snappy, macOS Mission Control feel)
   Easing: cubic-bezier(0.2, 0, 0, 1) - fast start, smooth decel
   ============================================================ */

/* --- Old view layer during spatial transition --- */

.zoom-layer-old {
  position: absolute;
  inset: 0;
  will-change: transform, opacity;
}

/* Zoom-in: old view scales up toward click point and fades */
.zoom-layer-old.zoom-in-exit {
  animation: zoomInExit 300ms cubic-bezier(0.2, 0, 0, 1) forwards;
}

/* --- Keyframes --- */

@keyframes zoomInExit {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(2.5);
  }
}

/* --- Non-spatial scale transitions (role/member/orga navigation) --- */

@keyframes fadeScaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes fadeScaleInFromSmall {
  from {
    opacity: 0;
    transform: scale(0.3);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes fadeScaleInFromLarge {
  from {
    opacity: 0;
    transform: scale(2);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ============================================================
   REDUCED MOTION PREFERENCES
   ============================================================ */

@media (prefers-reduced-motion: reduce) {
  .focus-view {
    animation: none !important;
    transition: opacity 150ms ease-out !important;
    transform: none !important;
  }

  .zoom-layer-old {
    animation: none !important;
    clip-path: none !important;
    will-change: auto !important;
  }
  .zoom-layer-old.zoom-in-exit {
    opacity: 0 !important;
    transform: none !important;
    transition: opacity 150ms ease-out !important;
  }
}
